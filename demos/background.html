<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>DeviantArt SafeFrames Demo: Update iframe background depending on its position</title>
        <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" title="no title" charset="utf-8">
        <script type='text/javascript' src='../dist/deviantart-safeframes-host.js'></script>
        <script type='text/javascript'>var d = new DeviantArtSafeFramesHost();</script>
    </head>
    <body>
        <header>
            <a href="http://deviantart.com">
            <span id="deviantart-logo">
                <span class="mark"></span>
                <span class="type"></span>
            </span>
            </a>
        </header>
        <div>
            <script type='text/javascript'>
                var HEADER_HEIGHT = parseInt(document.defaultView.getComputedStyle(document.querySelector('header')).height);
                var WIN_HEIGHT = window.innerHeight - HEADER_HEIGHT;
                var WIN_WIDTH = window.innerWidth;
                var MIN_SIZE = Math.min(200, WIN_WIDTH, WIN_HEIGHT) - 2;
                var MAX_SIZE = Math.min(500, WIN_WIDTH, WIN_HEIGHT) - 2;

                function createIframe(x, y, w, h) {
                    var iframe = document.createElement('iframe');
                    iframe.setAttribute('frameborder', '1');
                    iframe.setAttribute('marginheight', '0');
                    iframe.setAttribute('marginwidth', '0');
                    iframe.setAttribute('scrolling', 'no');
                    iframe.style.position = "absolute";
                    iframe.style.width = w + 'px';
                    iframe.style.height = h + 'px';
                    iframe.style.top = y + 'px';
                    iframe.style.left = x + 'px';
                    iframe.src = 'iframes/bgcutout.html';
                    document.body.appendChild(iframe);
                    return iframe;
                }

                var numFrames = 10;
                while (numFrames-- > 0) {
                    var w = Math.random() * (MAX_SIZE - MIN_SIZE) + MIN_SIZE;
                    var h = Math.random() * (MAX_SIZE - MIN_SIZE) + MIN_SIZE;
                    var x = Math.random() * Math.max(0, WIN_WIDTH - w);
                    var y = Math.random() * Math.max(0, WIN_HEIGHT - h) + HEADER_HEIGHT;
                    createIframe(x, y, w, h);
                }
            </script>
        </div>
    </body>
</html>

